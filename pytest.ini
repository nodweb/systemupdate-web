[pytest]
addopts = -v --tb=short --strict-markers --import-mode=importlib
testpaths =
    services/device-service
    services/notification-service
    services/data-ingest-service
    services/ws-hub
    tests/security

# Markers for test categorization
markers =
    integration: marks tests as integration tests (deselect with '-m "not integration"')
    e2e: marks tests as end-to-end tests (deselect with '-m "not e2e"')
    security: marks tests as security tests (deselect with '-m "not security"')
    slow: marks tests as slow (deselect with '-m "not slow"')
    docker: tests that require Docker environment (deselect with '-m "not docker"')
    timeout: tests that require extended timeouts (deselect with '-m "not timeout"')

# Test coverage configuration
python_files = test_*.py
python_functions = test_*
python_classes = Test*

# Logging configuration
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# JUnit XML output for CI
junit_suite_name = systemupdate-tests
junit_logging = all
junit_duration_report = call
junit_family = xunit2
